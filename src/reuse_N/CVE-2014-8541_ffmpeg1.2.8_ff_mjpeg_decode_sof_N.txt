diff的N行：
/* if different size, realloc/alloc picture */
if (   width != s->width || height != s->height
|| memcmp(s->h_count, h_count, sizeof(h_count))
|| memcmp(s->v_count, v_count, sizeof(v_count))) {

s->width      = width;
s->height     = height;
memcpy(s->h_count, h_count, sizeof(h_count));
memcpy(s->v_count, v_count, sizeof(v_count));
s->interlaced = 0;
//**************
    if (   width != s->width || height != s->height
        || memcmp(s->h_count, h_count, sizeof(h_count))
        || memcmp(s->v_count, v_count, sizeof(v_count))) {
        av_freep(&s->qscale_table);

        s->width      = width;
        s->height     = height;
        memcpy(s->h_count, h_count, sizeof(h_count));
        memcpy(s->v_count, v_count, sizeof(v_count));
        s->interlaced = 0;